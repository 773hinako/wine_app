# 📱 ワイン記録アプリ インストールガイド

このアプリをスマートフォンにインストールして、ネイティブアプリのように使う方法を説明します。

## 📶 ステップ1: スマホからアクセス

### 同じWi-Fiネットワークに接続
1. PCとスマホを**同じWi-Fiネットワーク**に接続してください
2. スマホのブラウザで以下のURLにアクセス：

```
http://192.168.11.19:8000
```

> 💡 **注意**: IPアドレスは環境によって異なる場合があります。
> PCのIPアドレスを確認するには：
> - Windows: `ipconfig` コマンドで確認
> - Mac: `ifconfig` コマンドで確認

### HTTPSで公開する方法（推奨）

カメラ機能を確実に動作させるには、HTTPSが必要です。以下の方法があります：

#### 方法1: ngrokを使用（簡単）
```bash
# ngrokをインストール（初回のみ）
# https://ngrok.com/ からダウンロード

# サーバーを公開
ngrok http 8000
```

表示されたHTTPS URLをスマホで開きます。

#### 方法2: 自己署名証明書（開発用）
```bash
# Python HTTPS サーバー
python -m http.server 8000 --bind 0.0.0.0

# または、OpenSSLで証明書を生成してHTTPSサーバーを起動
```

## 📲 ステップ2: PWAとしてインストール

### Android (Chrome)

1. Chromeでアプリを開く
2. 画面下部に「**アプリをインストール**」バナーが表示されたら、**インストール**ボタンをタップ
3. または、メニュー（⋮）→「**ホーム画面に追加**」を選択
4. 確認ダイアログで「**追加**」をタップ

### iPhone/iPad (Safari)

1. Safariでアプリを開く
2. 画面下部に「**ホーム画面に追加**」の案内が表示されます
3. 下部の**共有ボタン** (□に↑) をタップ
4. 「**ホーム画面に追加**」を選択
5. アプリ名を確認して「**追加**」をタップ

### デスクトップ (Chrome/Edge)

1. ブラウザでアプリを開く
2. アドレスバー右側の「**インストール**」アイコン (⊕) をクリック
3. 確認ダイアログで「**インストール**」をクリック

## ✅ インストール確認

インストールが成功すると：
- ✨ ホーム画面にアプリアイコン（🍷）が表示されます
- 📱 アイコンタップでアプリが起動します
- 🚀 ブラウザのUIなしで、ネイティブアプリのように動作します
- 📡 オフラインでも使用できます

## 🔧 トラブルシューティング

### アプリにアクセスできない
- PCとスマホが同じWi-Fiに接続されているか確認
- PCのファイアウォールがポート8000をブロックしていないか確認
- IPアドレスが正しいか再確認（`ipconfig`または`ifconfig`）

### カメラが動作しない
- HTTPSでアクセスしているか確認（localhostまたはHTTPS）
- ブラウザにカメラのアクセス許可を与えているか確認
- アプリ設定でカメラ権限が有効になっているか確認

### インストールバナーが表示されない
- **Android/Chrome**: すでにインストール済みか、PWA要件を満たしていない可能性
- **iOS/Safari**: 手動で共有ボタンから「ホーム画面に追加」を選択してください

### アプリが更新されない
1. ブラウザでアプリを開く
2. ページをリロード（引っ張って更新）
3. 新しいService Workerが利用可能な場合は自動更新されます

## 🌐 インターネット経由でアクセス（オプション）

ローカルネットワーク外からアクセスしたい場合：

### ngrokを使用
```bash
ngrok http 8000
```
生成されたURLをスマホで開く（世界中どこからでもアクセス可能）

### Cloudflare Tunnelを使用
```bash
# cloudflaredをインストール
cloudflared tunnel --url http://localhost:8000
```

⚠️ **セキュリティ注意**: 公開URLは誰でもアクセス可能です。本番環境では認証を追加してください。

## 📤 データのバックアップ

アプリ内の「**エクスポート**」機能（📤）を使って、定期的にデータをバックアップしてください：

1. ホーム画面右上の📤ボタンをタップ
2. JSONファイルがダウンロードされます
3. ファイルを安全な場所に保存

### データの復元
1. ホーム画面右上の📥ボタンをタップ
2. バックアップしたJSONファイルを選択
3. データがインポートされます

## 🎉 完了！

これで、いつでもどこでもワインを記録できます！

- 📷 レストランでワインラベルを撮影
- ⭐ その場で評価とメモを記録
- 🔍 過去の記録を検索
- 📤 データをバックアップ

楽しいワインライフを！🍷
